name: linux-test
on:
    push:
        branches: [ "main" ]
        paths:
            - "test-script/**"
    workflow_dispatch:


permissions:
    id-token: write
    contents: read


jobs:
    test-plan:
        runs-on: ubuntu-latest

        steps:
            - name: "check-out"
              uses: actions/checkout@v4
              with:
                fetch-depth: 2
            - name: Get Changes
              run: |


                files= git diff --name-only ${{github.event.before}} ${{github.event.after}} test-script/ | cut -d/ -f2


                echo $files

                read -a my_array <<< "$files"

                echo $my_array

                for item in "${my_array[@]}"; do
                echo "$item"
                done

                if [[ -n "${my_array[*]}" ]]; then
                    echo "my_var is an array."
                    else
                    echo "my_var is not an array."
                    fi

                for folders in $files;
                do
                echo $folders
                done
